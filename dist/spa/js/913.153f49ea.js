"use strict";(self["webpackChunkatlasmundi_app"]=self["webpackChunkatlasmundi_app"]||[]).push([[913],{5913:(t,e,o)=>{o.r(e),o.d(e,{default:()=>D});var a=o(9835),l=o(6970);const i={class:"q-py-sm text-center col"},n={class:"q-py-sm text-center row",style:{color:"lightgray"}},s={class:"q-py-sm text-center col"},r={key:0,class:"text-h6"},c={key:1,class:"text-h6"},u={class:"text-p"},m=(0,a.Uk)(" Visivel "),d={key:1},p=(0,a.Uk)("5 min ago");function g(t,e,o,g,f,h){const b=(0,a.up)("q-badge"),w=(0,a.up)("q-tab"),y=(0,a.up)("q-tabs"),k=(0,a.up)("q-separator"),_=(0,a.up)("l-tile-layer"),x=(0,a.up)("q-img"),z=(0,a.up)("q-avatar"),W=(0,a.up)("l-icon"),v=(0,a.up)("l-marker"),q=(0,a.up)("l-map"),Z=(0,a.up)("q-btn"),P=(0,a.up)("q-page-sticky"),Q=(0,a.up)("q-tab-panel"),M=(0,a.up)("q-item-section"),S=(0,a.up)("q-item-label"),C=(0,a.up)("q-item"),E=(0,a.up)("q-list"),U=(0,a.up)("q-tab-panels"),j=(0,a.up)("q-card"),L=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(L,{class:"flex flex-center content-start row",style:{"background-color":"#142044"}},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("div",s,[t.locException?((0,a.wg)(),(0,a.iD)("div",c,"Procurando...")):((0,a.wg)(),(0,a.iD)("div",r,(0,l.zw)(t.city)+"-"+(0,l.zw)(t.uf),1)),(0,a._)("div",u,[(0,a.Wm)(b,{rounded:"",color:"green",align:"middle"}),m])])]),(0,a.Wm)(j,{flat:"",square:"",class:"full-width inline justify-evenly row",style:{height:"79vh","background-color":"#142044"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"full-width","inline-label":"",modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=e=>t.tab=e),style:{color:"lightgray"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"fit",name:"1",icon:"mdi-earth",label:"Mapa"}),(0,a.Wm)(w,{class:"fit",name:"2",icon:"mdi-forum",label:"Chat"},{default:(0,a.w5)((()=>[t.newMessages>0?((0,a.wg)(),(0,a.j4)(b,{key:0,floating:"",color:"red",rounded:""})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(k),(0,a.Wm)(U,{animated:"",modelValue:t.tab,"onUpdate:modelValue":e[2]||(e[2]=e=>t.tab=e),style:{"background-color":"#142044",color:"lightgray"},class:"fit"},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{name:"1",class:"fit",style:{padding:"0px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{options:t.options,ref:"map",zoom:t.zoom,"min-zoom":18,"max-zoom":18,center:t.location,"onUpdate:center":e[1]||(e[1]=e=>t.location=e),centerModifiers:{sync:!0},style:{"z-index":"0"},"zoom-animation":""},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{url:t.url,"layer-type":"base",name:"OpenStreetMap",attribution:t.attribution},null,8,["url","attribution"]),(0,a.Wm)(v,{"lat-lng":t.location},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{"icon-anchor":t.dynamicAnchor,"icon-size":t.dynamicSize},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{size:"75px"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{alt:"Minha Foto Emote Sorrindo",ratio:"1",src:t.userPic,style:{border:"2px solid #11a3b9","border-radius":"100%"}},null,8,["src"])])),_:1})])),_:1},8,["icon-anchor","icon-size"])])),_:1},8,["lat-lng"])])),_:1},8,["options","zoom","center"]),(0,a.Wm)(P,{position:"bottom-right",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{fab:"",icon:"mdi-pin",style:{"background-color":"#11a3b9"}})])),_:1}),(0,a.Wm)(P,{position:"bottom-left",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{fab:"",padding:"xs",icon:"mdi-target",style:{"background-color":"lightgray",color:"#142044"},onClick:t.getLocation},null,8,["onClick"])])),_:1})])),_:1}),(0,a.Wm)(Q,{class:"fit",style:{padding:"0px"},name:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.chatUsers,(e=>((0,a.wg)(),(0,a.j4)(C,{key:e,clickable:"",onClick:o=>t.$router.push(`/chat/${e.userName}`)},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{top:"",avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{color:"primary","text-color":"white"},{default:(0,a.w5)((()=>[e.profPic.length>0?((0,a.wg)(),(0,a.j4)(x,{key:0,src:e.profPic},null,8,["src"])):((0,a.wg)(),(0,a.iD)("div",d,(0,l.zw)(e.name[0]),1))])),_:2},1024)])),_:2},1024),(0,a.Wm)(M,{class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{style:{color:"#11a3b9"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.name),1)])),_:2},1024),(0,a.Wm)(S,{style:{color:"aliceblue"},caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.lastMsg),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(M,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{caption:"",style:{color:"aliceblue"}},{default:(0,a.w5)((()=>[p])),_:1})])),_:1})])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})}var f=o(4880),h=o(3529);const b=(0,a.aZ)({components:{LMap:f.iA,LTileLayer:f.Hw,LMarker:f.$R,LIcon:f.QC},name:"HomePage",data(){return{location:[0,0],locError:null,locException:!0,url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',chatUsers:[{name:"Antonio M Dores",userName:"amdores",profPic:"https://i.pinimg.com/736x/d9/5a/28/d95a28bfa4e28bcfd64e27aaf43a06f9.jpg",lastMsg:"Eu: Macabro"},{name:"Dolores F Barriga",userName:"doloresfb",profPic:"",lastMsg:"PARA DE ZOAR MEU NOME"}],newMessages:0,tab:"1",zoom:18,options:{zoomControl:!1,dragging:!1},markers:[],users:{},userPic:"http://bostonvoyager.com/wp-content/uploads/2017/11/personal_photo-233-1000x600.jpg",iconSize:50,iconSizeText:"50px",city:"CIDADE",uf:"UF"}},created(){this.getLocation()},mounted(){this.$nextTick((function(){window.setInterval((()=>{this.getLocation()}),1e3)}))},computed:{dynamicSize(){return[this.iconSize,1.15*this.iconSize]},dynamicAnchor(){return[this.iconSize/2,1.15*this.iconSize]}},methods:{getProfileData(){var t=localStorage.getItem("profileId"),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}};fetch(`/v1/profiles/${t}`,e).then((t=>t.json())).then((t=>{console.log(t)})).catch((t=>{console.log(t)}))},async getLocation(){var t=!1;"granted"!=(await h.b.checkPermissions()).location&&await h.b.requestPermissions("location"),h.b.getCurrentPosition().then((t=>{this.location=[t.coords.latitude,t.coords.longitude]})).catch((e=>{this.locError=e.message,t=!0})),t||await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${this.location[0]}&lon=${this.location[1]}`).then((t=>(this.locException=!1,t.json()))).then((t=>{this.city=t.address.town,this.uf=t.address.state.substr(0,2).toUpperCase(),this.locException=!1})).catch((t=>{this.locException=!0}))}}});var w=o(1639),y=o(9885),k=o(990),_=o(4458),x=o(2230),z=o(900),W=o(926),v=o(9800),q=o(4106),Z=o(1357),P=o(335),Q=o(627),M=o(9379),S=o(3246),C=o(490),E=o(1233),U=o(3115),j=o(9984),L=o.n(j);const A=(0,w.Z)(b,[["render",g]]),D=A;L()(b,"components",{QPage:y.Z,QBadge:k.Z,QCard:_.Z,QTabs:x.Z,QTab:z.Z,QSeparator:W.Z,QTabPanels:v.Z,QTabPanel:q.Z,QAvatar:Z.Z,QImg:P.Z,QPageSticky:Q.Z,QBtn:M.Z,QList:S.Z,QItem:C.Z,QItemSection:E.Z,QItemLabel:U.Z})}}]);